{% import "macros.html" as macros -%}
{%- set bar_width = 6 -%}
<html lang="en">
<head>
  <title>TrueScrub&trade; Leaderboard</title>
</head>
<body>
<h1>TrueScrub&trade; Leaderboard</h1>
{{ macros.season_menu("/leaderboard", selected_season, seasons) }}
<table>
  <thead>
  <tr>
    <th>Name</th>
    <th>MMR</th>
    <th>Percentile</th>
    <th>Skill Group</th>
  </tr>
  </thead>
  <tbody>
  {% for player in leaderboard %}
    <tr>
      <td><a href="/profiles/{{ player.player_id }}">{{ player.steam_name }}</a></td>
      <td title="{{ player.rating.mu|int }} ± {{ player.rating.sigma|int }}σ">{{ player.mmr }}</td>
      <td title="{{ player.lower_bound }}% &ndash; {{ player.upper_bound }}%">
        <div style="background: #ddd; width: {{ bar_width }}em; height: 1em; border-radius: 1em;">
          <div style="background: #444; width: {{ player.rating_width * bar_width }}em; height: 1em; border-radius: 1em; margin-left: {{ player.rating_offset * bar_width }}em;"></div>
        </div>
      </td>
      <td>{{ player.skill_group }}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>
<p><a href="/skill_groups">Skill Groups</a></p>
</body>
</html>
